<head>
   <style>

      * {
         font-family: 'Nunito', sans-serif;
      }
      svg {
         stroke-linecap: round;
         stroke-linejoin: round;
      }

      .shadow {
         -webkit-filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, .7));
         filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, .7));
      }
   </style>

<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
</head>

<div>
   <input type="color" id="input1" name="head" oninput="testFunc(1)">
   <label for="head">Strand 1</label>

   <input type="color" id="input2" name="head" oninput="testFunc(2)">
   <label for="head">Strand 2</label>

   <input type="color" id="input3" name="head" oninput="testFunc(3)">
   <label for="head">Strand 3</label>

   <input type="color" id="input4" name="head" oninput="testFunc(4)">
   <label for="head">Strand 4</label>
</div>

<p>
<div id="sine_wave">
   <svg viewbox="0 0 250 50" style="width:100%" class="shadow">
   </svg>
</div>
</p>

<div>
   <input type="button" name="head" onClick="resetColours()" value="Random Colours">
   <label for="thick">Thickness</label>
   <input type="number" id="thick" name="thick" value="3" min="1" max="15" onChange="changeThickness()">
</div>

<div>
   <textarea id="copybox" rows=6 cols=60></textarea>

</div>
<input type="button" name="head" onClick="copy()" value="Copy colours">
<input type="button" name="head" onClick="loadColours()" value="Load colours">


<script>
   function testFunc(selecter) {
      var input = 'input'.concat(selecter);
      var strand = 'strand'.concat(selecter);

      var x = document.getElementById(input).value;
      var y = document.getElementsByClassName(strand);

      for (i = 0; i < y.length; i++) {
         y[i].style.stroke = x;
      }
      updateCopyBox();
   }

   function updateCopyBox() {

      var template = "Strand 1 - [1]\nStrand 2 - [2]\nStrand 3 - [3]\nStrand 4 - [4]"
         + "\nColours generated with NLovell Audio's Cable Previewer. \nhttps://nlovellaudio.co.uk/shop"

      var input1 = document.getElementById("input1").value;
      var input2 = document.getElementById("input2").value;
      var input3 = document.getElementById("input3").value;
      var input4 = document.getElementById("input4").value;

      template = template.replace("[1]", input1).replace("[2]", input2).replace("[3]", input3).replace("[4]", input4);

      document.getElementById("copybox").value = template;

   }

   function loadColours() {
      colours = document.getElementById("copybox").value
      regex = new RegExp('#\\w{6}', "g");
      matched = colours.match(regex);

      console.log(colours);
      console.log(matched);

      if (matched.length === 4) {

         for (i = 1; i < 5; i++) {
            document.getElementById("input".concat(i)).value = matched[i - 1];
            var strand = 'strand'.concat(i);

            var strands = document.getElementsByClassName(strand);

            for (j = 0; j < strands.length; j++) {
               strands[j].style.stroke = document.getElementById("input".concat(i)).value;
            }
         }
      }


   }

   function copy() {
      var copy = document.getElementById("copybox");
      copy.select();
      copy.setSelectionRange(0, 99999)
      document.execCommand("copy");
   }

   function changeThickness() {
      var x = document.getElementById('thick').value;
      var y = document.getElementsByClassName("svg");

      for (i = 0; i < y.length; i++) {
         y[i].style.strokeWidth = x;
      }

   }

   function resetColours() {
      for (var selecter = 1; selecter < 5; selecter++) {
         var strand = 'strand'.concat(selecter);
         var input = 'input'.concat(selecter);

         var colour = getColour();
         document.getElementById(input).value = colour;

         var y = document.getElementsByClassName(strand);

         for (i = 0; i < y.length; i++) {
            y[i].style.stroke = colour;
         }

      }

      updateCopyBox();
   }

   function getColour() {
      return '#' + (Math.floor(Math.random() * 16777215).toString(16).padStart(6, "0"));
   }

   var svg = document.getElementById('sine_wave').children[0];
   var origin = { //origin of axes
      x: 10,
      y: 20
   };
   var amplitude = 12; // wave amplitude
   var rarity = 1; // point spacing
   var freq = 0.05; // angular frequency
   //var phase = 0; // phase angle

   function newSine(phase, selecter, isSine) {
      var strand = 'strand'.concat(selecter).concat(" svg");;
      var input = 'input'.concat(selecter);

      if (isSine) {
         for (var i = -10; i < 250; i++) {
            var line = document.createElementNS("http://www.w3.org/2000/svg", "line");

            line.setAttribute('x1', (i - 1) * rarity + origin.x);
            line.setAttribute('y1', Math.sin(freq * (i - 1 + phase)) * amplitude + origin.y);

            line.setAttribute('x2', i * rarity + origin.x);
            line.setAttribute('y2', Math.sin(freq * (i + phase)) * amplitude + origin.y);

            line.setAttribute('class', strand);
            svg.appendChild(line);
         }
      }
      else {
         for (var i = -1; i < 5; i++) {
            var line = document.createElementNS("http://www.w3.org/2000/svg", "line");

            line.setAttribute('x1', (40) - phase + i * 124);
            line.setAttribute('y1', 24);

            line.setAttribute('x2', (104) - phase + i * 124);
            line.setAttribute('y2', 16);

            line.setAttribute('class', strand);
            svg.appendChild(line);
         }
      }
   }

   newSine(0, '1', true);
   newSine(188, '3', true);
   newSine(0, '2', false);
   newSine(-124 / 2, '4', false);

   resetColours();
   changeThickness();

</script>