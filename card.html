<!DOCTYPE html>
<html
   xmlns="http://www.w3.org/1999/xhtml"
   xmlns:fb="http://ogp.me/ns/fb#" lang="en">
   <head>
      <meta charset="UTF-8">
      <title>card | al@nlovell.net</title>
      <script src="js/noise.js"></script>
      <link rel="icon" type="image/png" href="img/al-logo.png">
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/gstyle.css">
      <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans" rel="stylesheet">
      <meta property="og:image" content="http://nlovell.net/img/cards/card-r.jpg"/>
      <meta property="og:image:type" content="image/jpeg" />
      <meta property="og:description" content="nlovell.net | a writhing mass of trial-and-error" />
      <meta property="og:locale" content="en_GB" />
      <meta property="og:site_name" content="nlovell.net" />
   </head>
   <body style="overflow:hidden;">
      <a href="index">
      <img class="drive" src="img/favicon.png">
      </a>
      <div class="center">
         <!--test-->
         <div class="flip-box">
            <div class="flip-box-inner">
               <div class="flip-box-front" style="border-radius:5.5%;">
                  <img src="img/cards/cardv2-r.png" alt="Card" style="border-radius:5.5%;width:100%;height:100%" id="sider">
               </div>
               <div class="flip-box-back" style="border-radius:5.5%;">
                  <img src="img/cards/cardv2.png" alt="Card" style="border-radius:5.5%;width:100%;height:100%" id="side">
               </div>
            </div>
         </div>
      </div>
      <div class="center">
         <p id="nlovell">nlovell.net</p>
      </div>
      <!--tv generates the background-->
      <canvas id="tv"></canvas>
      <script src="js/index.js"></script>
      <script type="text/javascript"> 
			//Card directory
			var cards = "img/cards/";

			//Get the URL string
			var url_string = window.location.href
			var url = new URL(url_string);

			//Search for the ID parameter
			var c = url.searchParams.get("id");
			console.log(c);
			//Assign values to the cards
			var card = cards + c + ".png";
			var cardr = cards + c + "-r.png"

			if(c == null) {
			console.log("No element defined. Using default.")
			} else {
			checkImage(card, function(){imageFound(card, "side");}, function(){imageNotFound(card, "side");});
			checkImage(cardr, function(){imageFound(cardr, "sider");}, function(){imageNotFound(cardr, "sider");});
			}
			
			function checkImage(imageSrc, good, bad) {
				var img = new Image();
				img.onload = good; 
				img.onerror = bad;
				img.src = imageSrc;
			}
				function imageFound(URL, ELEMENT) {
				document.getElementById(ELEMENT).src=URL;
				console.log(URL + " found and displayed.");
			}
			function imageNotFound(URL, ELEMENT) {
				document.getElementById(ELEMENT).src=cards + "card404.png";
				console.log(URL + " not found. 404 displayed instead.");
			}
	
			
      </script>
   </body>
</html>